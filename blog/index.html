<!doctype html>
<html lang="en" dir="ltr" class="blog-wrapper blog-list-page plugin-blog plugin-id-default">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.2.0">
<title data-rh="true">Blog | Metro API</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://api.metro.net/metro-api-v2/blog"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" property="og:title" content="Blog | Metro API"><meta data-rh="true" name="description" content="Blog"><meta data-rh="true" property="og:description" content="Blog"><meta data-rh="true" name="docusaurus_tag" content="blog_posts_list"><meta data-rh="true" name="docsearch:docusaurus_tag" content="blog_posts_list"><link data-rh="true" rel="icon" href="/metro-api-v2/img/favicon.png"><link data-rh="true" rel="canonical" href="https://api.metro.net/metro-api-v2/blog"><link data-rh="true" rel="alternate" href="https://api.metro.net/metro-api-v2/blog" hreflang="en"><link data-rh="true" rel="alternate" href="https://api.metro.net/metro-api-v2/blog" hreflang="x-default"><link rel="alternate" type="application/rss+xml" href="/metro-api-v2/blog/rss.xml" title="Metro API RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/metro-api-v2/blog/atom.xml" title="Metro API Atom Feed"><link rel="stylesheet" href="/metro-api-v2/assets/css/styles.34edbeaf.css">
<link rel="preload" href="/metro-api-v2/assets/js/runtime~main.8432acd7.js" as="script">
<link rel="preload" href="/metro-api-v2/assets/js/main.6d6e4aad.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#docusaurus_skipToContent_fallback">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/metro-api-v2/"><div class="navbar__logo"><img src="/metro-api-v2/img/favicon.png" alt="Metro API Logo" class="themedImage_ToTc themedImage--light_HNdA"><img src="/metro-api-v2/img/favicon.png" alt="Metro API Logo" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate">Metro API</b></a><a class="navbar__item navbar__link" href="/metro-api-v2/docs/intro">Tutorial</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/metro-api-v2/blog">Blog</a><a class="navbar__item navbar__link" href="/metro-api-v2/docs/api">API</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/lacmta/metro-api-v2" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="searchBox_ZlJk"><div class="navbar__search"><span aria-label="expand searchbar" role="button" class="search-icon" tabindex="0"></span><input type="search" id="search_input_react" placeholder="Loading..." aria-label="Search" class="navbar__search-input search-bar" disabled=""></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="container margin-vert--lg"><div class="row"><aside class="col col--3"><nav class="sidebar_re4s thin-scrollbar" aria-label="Blog recent posts navigation"><div class="sidebarItemTitle_pO2u margin-bottom--md">Recent posts</div><ul class="sidebarItemList_Yudw clean-list"><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/metro-api-v2/blog/websocket-to-me">Websocket to Me!</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/metro-api-v2/blog/hello-world">Hello World!</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/metro-api-v2/blog/api-documentation-launch">API 2.0 Documentation Launch ðŸš€</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/metro-api-v2/blog/long-blog-post">Long Blog Post</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/metro-api-v2/blog/mdx-blog-post">MDX Blog Post</a></li></ul></nav></aside><main class="col col--7" itemscope="" itemtype="http://schema.org/Blog"><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h2 class="title_f1Hy" itemprop="headline"><a itemprop="url" href="/metro-api-v2/blog/websocket-to-me">Websocket to Me!</a></h2><div class="container_mt6G margin-vert--md"><time datetime="2023-03-29T00:00:00.000Z" itemprop="datePublished">March 29, 2023</time> Â· <!-- -->2 min read</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--6 authorCol_Hf19"><div class="avatar margin-bottom--sm"><a href="https://github.com/albertkun" target="_blank" rel="noopener noreferrer" class="avatar__photo-link"><img class="avatar__photo" src="https://avatars.githubusercontent.com/u/8574425?v=4" alt="Albert Kochaphum"></a><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://github.com/albertkun" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">Albert Kochaphum</span></a></div><small class="avatar__subtitle" itemprop="description">API Guy</small></div></div></div></div></header><div class="markdown" itemprop="articleBody"><p>Hola Metro A-PIoneers! Today we are launching 2.1.21 of our API which is a mino version release that enables websockets!</p><p>And gosh, was it a pain to implement!!! While FastAPI has good support for websockets, our API was not meant for asynchronous calls.</p><p>Why did we need these asynchronous calls? Well, the data we wanted to send through websockets was live GTFS Real Time data that was also joined to the GTFS Static data.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="technology-stack">Technology Stack<a class="hash-link" href="#technology-stack" title="Direct link to heading">â€‹</a></h2><p>The API needed to be basically re-done for async calls through <code>asyncpg</code> with <code>aysncio</code> and new updated <code>sqlalchemy</code> commands.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="asyncpg">asyncpg<a class="hash-link" href="#asyncpg" title="Direct link to heading">â€‹</a></h3><p>We needed to redo the database connection to listen for live updates, so we connected using asyncpg.</p><div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> sqlalchemy</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">ext</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">asyncio </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> create_async_engine</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> AsyncSession</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>We then re-did our SqlAlchemy engine to connect using the async url: </p><div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">async_engine </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> create_async_engine</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">create_async_uri</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">Config</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">DB_URI</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> echo</span><span class="token operator" style="color:#393A34">=</span><span class="token boolean" style="color:#36acaa">False</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">async_session </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> sessionmaker</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">async_engine</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> expire_on_commit</span><span class="token operator" style="color:#393A34">=</span><span class="token boolean" style="color:#36acaa">False</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> class_</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">AsyncSession</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Finally we created a new function to connect to the database:</p><div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">async</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">def</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">get_async_db</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">async</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">with</span><span class="token plain"> async_session</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">as</span><span class="token plain"> db</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">try</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token keyword" style="color:#00009f">yield</span><span class="token plain"> db</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">finally</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token keyword" style="color:#00009f">await</span><span class="token plain"> async_engine</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">dispose</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Phew!</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="asynchronously-querying-the-data">Asynchronously querying the data<a class="hash-link" href="#asynchronously-querying-the-data" title="Direct link to heading">â€‹</a></h3><p>Now that we were connected to the database, we had to re-do the queries!</p><p>For async calls, SqlAlchemy uses <code>.select</code> instead of <code>.query</code> so our code went from:</p><div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">    the_query </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> db</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">query</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">gtfs_models</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">VehiclePosition</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token builtin">filter</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">gtfs_models</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">VehiclePosition</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">agency_id </span><span class="token operator" style="color:#393A34">==</span><span class="token plain"> agency_id</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token builtin">all</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>to:</p><div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">the_query </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">await</span><span class="token plain"> session</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">execute</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">select</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">gtfs_models</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">VehiclePosition</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">where</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">gtfs_models</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">VehiclePosition</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">route_code </span><span class="token operator" style="color:#393A34">==</span><span class="token plain"> route_code</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">gtfs_models</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">VehiclePosition</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">agency_id </span><span class="token operator" style="color:#393A34">==</span><span class="token plain"> agency_id</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>And the results needed to be converted to <code>scalars</code>:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">    for row in the_query.scalars().all():</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        print(row)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>All the code is in the API&#x27;s <code>database.py</code>,<code>main.py</code>, <code>crud.py</code> here: <a href="https://github.com/LACMTA/metro-api-v2/tree/main/fastapi/app" target="_blank" rel="noopener noreferrer">https://github.com/LACMTA/metro-api-v2/tree/main/fastapi/app</a>.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="conclusion">Conclusion<a class="hash-link" href="#conclusion" title="Direct link to heading">â€‹</a></h2><p>After being pummeled by websockets for the past couple of weeks, all I can say is that it&#x27;s been pretty painful. </p><p>I just can&#x27;t wait until someone comes up with <code>webmittens</code> next.</p></div><footer class="row docusaurus-mt-lg"><div class="col"><b>Tags:</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/metro-api-v2/blog/tags/api">api</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/metro-api-v2/blog/tags/websockets">websockets</a></li></ul></div></footer></article><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h2 class="title_f1Hy" itemprop="headline"><a itemprop="url" href="/metro-api-v2/blog/hello-world">Hello World!</a></h2><div class="container_mt6G margin-vert--md"><time datetime="2023-03-21T00:00:00.000Z" itemprop="datePublished">March 21, 2023</time> Â· <!-- -->One min read</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--6 authorCol_Hf19"><div class="avatar margin-bottom--sm"><a href="https://github.com/matikin9" target="_blank" rel="noopener noreferrer" class="avatar__photo-link"><img class="avatar__photo" src="https://avatars.githubusercontent.com/u/1873072?v=4" alt="Nina Kin"></a><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://github.com/matikin9" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">Nina Kin</span></a></div><small class="avatar__subtitle" itemprop="description">Head Digital Honcho</small></div></div></div></div></header><div class="markdown" itemprop="articleBody"><p>We&#x27;ll be making regular blog updates as we work on the API and the documentation site. Our team is small but we&#x27;ve got big dreams and a desire to make our data more open and accessible.</p><p>Keep an eye on this space as we post about changes, tutorials, etc.  It&#x27;s as much for your information as it is to keep ourselves accountable.  </p><p>Questions/comments are welcomed on our GitHub repository <a href="https://github.com/LACMTA/metro-api-v2/discussions" target="_blank" rel="noopener noreferrer">discussions board</a>.</p><p>We&#x27;d love to hear your about any <a href="https://github.com/LACMTA/metro-api-v2/issues" target="_blank" rel="noopener noreferrer">bugs or issues</a> as well!</p></div><footer class="row docusaurus-mt-lg"><div class="col"><b>Tags:</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/metro-api-v2/blog/tags/general">general</a></li></ul></div></footer></article><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h2 class="title_f1Hy" itemprop="headline"><a itemprop="url" href="/metro-api-v2/blog/api-documentation-launch">API 2.0 Documentation Launch ðŸš€</a></h2><div class="container_mt6G margin-vert--md"><time datetime="2023-03-20T00:00:00.000Z" itemprop="datePublished">March 20, 2023</time> Â· <!-- -->One min read</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--6 authorCol_Hf19"><div class="avatar margin-bottom--sm"><a href="https://github.com/albertkun" target="_blank" rel="noopener noreferrer" class="avatar__photo-link"><img class="avatar__photo" src="https://avatars.githubusercontent.com/u/8574425?v=4" alt="Albert Kochaphum"></a><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://github.com/albertkun" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">Albert Kochaphum</span></a></div><small class="avatar__subtitle" itemprop="description">API Guy</small></div></div></div></div></header><div class="markdown" itemprop="articleBody"><p>Metro API 2.0 has launched into BETA, which means we are scaling up for wide spread usage. If you have any issues, please head on over to the GitHub Issue&#x27;s board and add an <a href="https://github.com/LACMTA/metro-api-v2/issues" target="_blank" rel="noopener noreferrer">issue</a> </p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="api-architecture">API Architecture<a class="hash-link" href="#api-architecture" title="Direct link to heading">â€‹</a></h2><p>The API is composed of the following:</p><ol><li><code>data-loading-service</code> - the backend <strong>docker</strong> container that routinely executes Python scripts and <a href="https://pandas.pydata.org/" target="_blank" rel="noopener noreferrer">pandas</a> to load data into the PostgreSQL database.</li><li><code>api</code> - the frontend <strong>docker</strong> container that hosts the connections to the database using <a href="https://fastapi.tiangolo.com/" target="_blank" rel="noopener noreferrer">fastapi</a>.</li><li><code>documentation</code> - a static generated website built with <a href="https://docusaurus.io/" target="_blank" rel="noopener noreferrer">docusaurus</a>.</li></ol><h3 class="anchor anchorWithStickyNavbar_LWe7" id="data">Data<a class="hash-link" href="#data" title="Direct link to heading">â€‹</a></h3><p> put into a PostgreSQL database  </p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="data-sources">Data Sources<a class="hash-link" href="#data-sources" title="Direct link to heading">â€‹</a></h4><ul><li>GTFS Data</li></ul></div><footer class="row docusaurus-mt-lg"><div class="col"><b>Tags:</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/metro-api-v2/blog/tags/documentation">documentation</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/metro-api-v2/blog/tags/api">api</a></li></ul></div></footer></article><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h2 class="title_f1Hy" itemprop="headline"><a itemprop="url" href="/metro-api-v2/blog/long-blog-post">Long Blog Post</a></h2><div class="container_mt6G margin-vert--md"><time datetime="2023-03-19T00:00:00.000Z" itemprop="datePublished">March 19, 2023</time> Â· <!-- -->One min read</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--6 authorCol_Hf19"><div class="avatar margin-bottom--sm"><a href="https://github.com/matikin9" target="_blank" rel="noopener noreferrer" class="avatar__photo-link"><img class="avatar__photo" src="https://avatars.githubusercontent.com/u/1873072?v=4" alt="Nina Kin"></a><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://github.com/matikin9" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">Nina Kin</span></a></div><small class="avatar__subtitle" itemprop="description">Head Digital Honcho</small></div></div></div><div class="col col--6 authorCol_Hf19"><div class="avatar margin-bottom--sm"><a href="https://github.com/albertkun" target="_blank" rel="noopener noreferrer" class="avatar__photo-link"><img class="avatar__photo" src="https://avatars.githubusercontent.com/u/8574425?v=4" alt="Albert Kochaphum"></a><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://github.com/albertkun" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">Albert Kochaphum</span></a></div><small class="avatar__subtitle" itemprop="description">API Guy</small></div></div></div></div></header><div class="markdown" itemprop="articleBody"><p>Welcome to the dev blog for Metro&#x27;s API!</p></div><footer class="row docusaurus-mt-lg"><div class="col col--9"><b>Tags:</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/metro-api-v2/blog/tags/documentation">documentation</a></li></ul></div><div class="col text--right col--3"><a aria-label="Read more about Long Blog Post" href="/metro-api-v2/blog/long-blog-post"><b>Read More</b></a></div></footer></article><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h2 class="title_f1Hy" itemprop="headline"><a itemprop="url" href="/metro-api-v2/blog/mdx-blog-post">MDX Blog Post</a></h2><div class="container_mt6G margin-vert--md"><time datetime="2021-08-01T00:00:00.000Z" itemprop="datePublished">August 1, 2021</time> Â· <!-- -->One min read</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--6 authorCol_Hf19"><div class="avatar margin-bottom--sm"><a href="https://github.com/matikin9" target="_blank" rel="noopener noreferrer" class="avatar__photo-link"><img class="avatar__photo" src="https://avatars.githubusercontent.com/u/1873072?v=4" alt="Nina Kin"></a><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://github.com/matikin9" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">Nina Kin</span></a></div><small class="avatar__subtitle" itemprop="description">Head Digital Honcho</small></div></div></div></div></header><div class="markdown" itemprop="articleBody"><p>Blog posts support <a href="https://docusaurus.io/docs/markdown-features" target="_blank" rel="noopener noreferrer">Markdown features</a>, such as <a href="https://mdxjs.com/" target="_blank" rel="noopener noreferrer">MDX</a>.</p><div class="theme-admonition theme-admonition-tip alert alert--success admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</div><div class="admonitionContent_S0QG"><p>Use the power of React to create interactive blog posts.</p><div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">button onClick</span><span class="token operator" style="color:#393A34">=</span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">alert</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;button clicked!&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">}</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token maybe-class-name">Click</span><span class="token plain"> me</span><span class="token operator" style="color:#393A34">!</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token operator" style="color:#393A34">/</span><span class="token plain">button</span><span class="token operator" style="color:#393A34">&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><button>Click me!</button></div></div></div><footer class="row docusaurus-mt-lg"><div class="col"><b>Tags:</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/metro-api-v2/blog/tags/docusaurus">docusaurus</a></li></ul></div></footer></article><nav class="pagination-nav" aria-label="Blog list page navigation"></nav></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/metro-api-v2/intro">Tutorial</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://twitter.com/metrolosangeles" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/metro-api-v2/blog">Blog</a></li><li class="footer__item"><a href="https://github.com/lacmta/" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright Â© 2023</div></div></div></footer></div>
<script src="/metro-api-v2/assets/js/runtime~main.8432acd7.js"></script>
<script src="/metro-api-v2/assets/js/main.6d6e4aad.js"></script>
</body>
</html>