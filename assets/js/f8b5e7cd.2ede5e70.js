"use strict";(self.webpackChunkdocumentation=self.webpackChunkdocumentation||[]).push([[3912],{59340:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>l,contentTitle:()=>a,default:()=>c,frontMatter:()=>r,metadata:()=>i,toc:()=>p});var o=n(87462),s=(n(67294),n(3905));const r={},a="Websockets",i={unversionedId:"websockets",id:"websockets",title:"Websockets",description:"The API has one WebSocket endpoint used to provide a stream of realtime data.  The URL is in this format:",source:"@site/docs/websockets.md",sourceDirName:".",slug:"/websockets",permalink:"/metro-api-v2/docs/websockets",draft:!1,tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"Documentation Site",permalink:"/metro-api-v2/docs/docs"}},l={},p=[{value:"Parameters",id:"parameters",level:2},{value:"Response",id:"response",level:2},{value:"Success",id:"success",level:3},{value:"Error",id:"error",level:3}],d={toc:p},u="wrapper";function c(e){let{components:t,...n}=e;return(0,s.kt)(u,(0,o.Z)({},d,n,{components:t,mdxType:"MDXLayout"}),(0,s.kt)("h1",{id:"websockets"},"Websockets"),(0,s.kt)("p",null,"The API has one WebSocket endpoint used to provide a stream of realtime data.  The URL is in this format:"),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre"},"wss://api.metro.net/ws/{agency_id}/{endpoint}/{route_codes (optional)}\n")),(0,s.kt)("h2",{id:"parameters"},"Parameters"),(0,s.kt)("p",null,(0,s.kt)("strong",{parentName:"p"},"agency_id (str)")),(0,s.kt)("p",null,"The agencyID is found in the GTFS-schedule ",(0,s.kt)("inlineCode",{parentName:"p"},"agency.txt")," files."),(0,s.kt)("p",null,"Values:"),(0,s.kt)("ul",null,(0,s.kt)("li",{parentName:"ul"},(0,s.kt)("inlineCode",{parentName:"li"},"LACMTA")," (Metro Bus)"),(0,s.kt)("li",{parentName:"ul"},(0,s.kt)("inlineCode",{parentName:"li"},"LACMTA_Rail")," (Metro Rail)\n")),(0,s.kt)("p",null,(0,s.kt)("strong",{parentName:"p"},"endpoint (str)")),(0,s.kt)("p",null,"The type of GTFS-realtime data to send."),(0,s.kt)("p",null,"Values:"),(0,s.kt)("ul",null,(0,s.kt)("li",{parentName:"ul"},(0,s.kt)("inlineCode",{parentName:"li"},"vehicle_positions")),(0,s.kt)("li",{parentName:"ul"},(0,s.kt)("inlineCode",{parentName:"li"},"trip_updates"))),(0,s.kt)("p",null,(0,s.kt)("strong",{parentName:"p"},"route_codes (str, optional)")),(0,s.kt)("p",null,"A comma-separated list of route codes to filter updates. If not provided, updates for all routes are sent."),(0,s.kt)("p",null,'Route codes are the definitive labels for each of the lines, minus HASTUS version numbers and separated from their "sister" lines.'),(0,s.kt)("h2",{id:"response"},"Response"),(0,s.kt)("p",null,"The WebSocket endpoint sends updates every 3 seconds."),(0,s.kt)("h3",{id:"success"},"Success"),(0,s.kt)("p",null,"The WebSocket endpoint sends updates in the following format:"),(0,s.kt)("p",null,'{\n"id": "vehicle_id",\n"vehicle": {\n"trip": {\n"route_id": "route_code",\n...\n},\n...\n},\n"route_code": "route_code",\n...\n}'),(0,s.kt)("p",null,"Each message from the WebSocket contains data for a single vehicle."),(0,s.kt)("h3",{id:"error"},"Error"),(0,s.kt)("p",null,"If an error occurs while processing updates, the WebSocket endpoint sends an error message in the following format:"),(0,s.kt)("p",null,'"Error: error_message"'))}c.isMDXComponent=!0}}]);